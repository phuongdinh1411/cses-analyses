<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            color: #1a1a1a;
            background: #ffffff;
            font-weight: 400;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 380px;
            background: #fafafa;
            border-right: 1px solid #e5e5e5;
            padding: 2rem 1.5rem;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }
        
        .sidebar h3 {
            color: #111827;
            margin-bottom: 1.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            letter-spacing: -0.025em;
        }
        
        .nav__items {
            list-style: none;
        }
        
        .nav__item {
            margin-bottom: 0.5rem;
        }
        
        .nav__item a {
            color: #374151;
            text-decoration: none;
            display: block;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-weight: 700;
            font-size: 0.95rem;
        }
        
        .nav__item a:hover {
            background: #f3f4f6;
            color: #111827;
            transform: translateX(2px);
        }
        
        .nav__item a.active {
            background: #3b82f6;
            color: white;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
        }
        
        .nav__sub-items {
            list-style: none;
            margin-left: 1rem;
            margin-top: 0.5rem;
            display: none;
        }
        
        .nav__sub-items.expanded {
            display: block;
        }
        
        .nav__sub-item {
            margin-bottom: 0.25rem;
        }
        
        .nav__sub-item a {
            display: block;
            font-size: 0.875rem;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-weight: 500;
            cursor: pointer;
            position: relative;
            color: #6b7280;
        }
        
        .nav__sub-item a::before {
            content: '';
            width: 4px;
            height: 4px;
            background: #d1d5db;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.75rem;
            vertical-align: middle;
        }
        
        .nav__sub-item a:hover {
            background: #f9fafb;
            color: #374151;
        }
        
        .nav__sub-item a.active {
            background: #3b82f6;
            color: white;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
        }
        
        .nav__sub-item a.active::before {
            background: white;
        }
        
        .nav__sub-sub-items {
            list-style: none;
            margin-left: 1rem;
            margin-top: 0.25rem;
            display: none;
        }
        
        .nav__sub-sub-items.expanded {
            display: block;
        }
        
        .nav__sub-sub-item {
            margin-bottom: 0.125rem;
        }
        
        .nav__sub-sub-item a {
            display: block;
            font-size: 0.8rem;
            padding: 0.375rem 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-weight: 400;
            color: #9ca3af;
            position: relative;
        }
        
        .nav__sub-sub-item a::before {
            content: '';
            width: 3px;
            height: 3px;
            background: #d1d5db;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
            vertical-align: middle;
        }
        
        .nav__sub-sub-item a:hover {
            background: #f9fafb;
            color: #6b7280;
        }
        
        .nav__sub-sub-item a.active {
            background: #3b82f6;
            color: white;
            font-weight: 600;
            box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
        }
        
        .nav__sub-sub-item a.active::before {
            background: white;
        }
        
        .main-content {
            flex: 1;
            padding: 3rem 4rem;
            max-width: calc(100vw - 380px);
            background: #ffffff;
        }
        
        .page-title {
            color: #111827;
            margin-bottom: 2.5rem;
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: -0.025em;
            line-height: 1.2;
        }
        
        .content {
            font-size: 1rem;
            line-height: 1.75;
            color: #374151;
        }
        
        .content h1, .content h2, .content h3 {
            color: #111827;
            margin: 2.5rem 0 1rem 0;
            font-weight: 600;
            letter-spacing: -0.025em;
        }
        
        .content h1 {
            font-size: 1.875rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        
        .content h2 {
            font-size: 1.5rem;
        }
        
        .content h3 {
            font-size: 1.25rem;
        }
        
        .content p {
            margin-bottom: 1.25rem;
        }
        
        .content ul, .content ol {
            margin: 1.25rem 0;
            padding-left: 1.5rem;
        }
        
        .content li {
            margin-bottom: 0.5rem;
        }
        
        .content code {
            background: #f3f4f6;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', monospace;
            font-size: 0.875rem;
            color: #dc2626;
        }
        
        /* Table Styles */
        .content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1.5rem 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .content table th {
            background: #f9fafb;
            color: #111827;
            font-weight: 600;
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .content table td {
            padding: 1rem;
            border-bottom: 1px solid #f3f4f6;
            color: #374151;
        }
        
        .content table tr:hover {
            background: #f9fafb;
        }
        
        /* Code Block Styles */
        .content pre {
            background: #f8f9fa;
            color: #333;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid #e9ecef;
            border-left: 4px solid #3b82f6;
        }
        
        .content pre code {
            background: none;
            color: #333;
            padding: 0;
            font-size: 0.875rem;
            line-height: 1.6;
        }
        
        /* Inline code styling */
        .content code {
            background: #f3f4f6;
            padding: 0.125rem 0.375rem;
            font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', monospace;
            font-size: 0.875rem;
            color: #dc2626;
        }
        

        
        /* Link Styles */
        .content a {
            color: #3b82f6;
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color 0.2s ease;
        }
        
        .content a:hover {
            border-bottom-color: #3b82f6;
        }
        
        /* Blockquote Styles */
        .content blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            color: #6b7280;
            font-style: italic;
        }
        
        /* Responsive Design */
        
        /* Large tablets and small desktops */
        @media (max-width: 1024px) {
            .sidebar {
                width: 320px;
            }
            
            .main-content {
                padding: 2.5rem 3rem;
                max-width: calc(100vw - 320px);
            }
            
            .page-title {
                font-size: 2.25rem;
            }
        }
        
        /* Tablets */
        @media (max-width: 768px) {
            .mobile-nav-toggle {
                display: block;
            }
            
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 1.5rem;
                border-right: none;
                border-bottom: 1px solid #e5e5e5;
                transform: translateY(-100%);
                opacity: 0;
                transition: all 0.3s ease;
            }
            
            .sidebar.mobile-open {
                transform: translateY(0);
                opacity: 1;
            }
            
            .main-content {
                padding: 2rem 1.5rem;
                max-width: 100%;
            }
            
            .page-title {
                font-size: 2rem;
                margin-bottom: 2rem;
            }
            
            .content {
                font-size: 0.95rem;
            }
            
            .content h1 {
                font-size: 1.75rem;
            }
            
            .content h2 {
                font-size: 1.375rem;
            }
            
            .content h3 {
                font-size: 1.125rem;
            }
        }
        
        /* Mobile phones */
        @media (max-width: 480px) {
            .mobile-nav-toggle {
                top: 0.75rem;
                right: 0.75rem;
                padding: 0.625rem;
            }
            
            .mobile-nav-toggle .hamburger,
            .mobile-nav-toggle .hamburger::before,
            .mobile-nav-toggle .hamburger::after {
                width: 18px;
            }
            
            .sidebar {
                padding: 1rem;
                max-height: 80vh;
                overflow-y: auto;
            }
            
            .sidebar h3 {
                font-size: 1rem;
                margin-bottom: 1rem;
            }
            
            .nav__item a {
                padding: 0.625rem 0.875rem;
                font-size: 0.9rem;
            }
            
            .nav__sub-item a {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
            }
            
            .nav__sub-sub-item a {
                padding: 0.375rem 0.5rem;
                font-size: 0.75rem;
            }
            
            .main-content {
                padding: 1.5rem 1rem;
            }
            
            .page-title {
                font-size: 1.75rem;
                margin-bottom: 1.5rem;
            }
            
            .content {
                font-size: 0.9rem;
                line-height: 1.6;
            }
            
            .content h1 {
                font-size: 1.5rem;
                margin: 2rem 0 0.75rem 0;
            }
            
            .content h2 {
                font-size: 1.25rem;
                margin: 1.75rem 0 0.75rem 0;
            }
            
            .content h3 {
                font-size: 1.125rem;
                margin: 1.5rem 0 0.75rem 0;
            }
            
            .content p {
                margin-bottom: 1rem;
            }
            
            .content ul, .content ol {
                margin: 1rem 0;
                padding-left: 1.25rem;
            }
            
            .content li {
                margin-bottom: 0.375rem;
            }
            
            .content pre {
                padding: 1rem;
                font-size: 0.8rem;
                margin: 1rem 0;
            }
            
            .content table {
                font-size: 0.8rem;
                margin: 1rem 0;
            }
            
            .content table th,
            .content table td {
                padding: 0.75rem 0.5rem;
            }
            
            .content code {
                font-size: 0.8rem;
                padding: 0.125rem 0.25rem;
            }
        }
        
        /* Extra small mobile phones */
        @media (max-width: 360px) {
            .sidebar {
                padding: 0.75rem;
            }
            
            .main-content {
                padding: 1rem 0.75rem;
            }
            
            .page-title {
                font-size: 1.5rem;
            }
            
            .content {
                font-size: 0.85rem;
            }
            
            .nav__item a {
                padding: 0.5rem 0.75rem;
                font-size: 0.85rem;
            }
            
            .nav__sub-item a {
                padding: 0.375rem 0.625rem;
                font-size: 0.75rem;
            }
            
            .nav__sub-sub-item a {
                padding: 0.25rem 0.375rem;
                font-size: 0.7rem;
            }
        }
        
        /* Landscape orientation on mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .sidebar {
                max-height: 40vh;
                overflow-y: auto;
            }
            
            .main-content {
                padding: 1.5rem 1rem;
            }
        }
        
        /* High DPI displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .content {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }
        
        /* Print styles */
        @media print {
            .sidebar {
                display: none;
            }
            
            .main-content {
                max-width: 100%;
                padding: 0;
            }
            
            .page-title {
                color: #000;
                border-bottom: 2px solid #000;
            }
            
            .content {
                color: #000;
            }
            
            .content pre {
                background: #f5f5f5;
                border: 1px solid #ccc;
                page-break-inside: avoid;
            }
            
            .content table {
                page-break-inside: avoid;
            }
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Focus States */
        .nav__item a:focus,
        .nav__sub-item a:focus,
        .nav__sub-sub-item a:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Animation for expanding items */
        .nav__sub-items,
        .nav__sub-sub-items {
            transition: all 0.3s ease;
        }
        
        /* Modern button styles */
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        /* Card styles */
        .card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin: 1rem 0;
        }
        
        /* Badge styles */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: #f3f4f6;
            color: #374151;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge.primary {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .badge.success {
            background: #dcfce7;
            color: #166534;
        }
        
        .badge.warning {
            background: #fef3c7;
            color: #92400e;
        }
        
        .badge.error {
            background: #fee2e2;
            color: #991b1b;
        }
        
        /* Mobile navigation toggle */
        .mobile-nav-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.75rem;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: all 0.2s ease;
        }
        
        .mobile-nav-toggle:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        
        .mobile-nav-toggle .hamburger {
            width: 20px;
            height: 2px;
            background: white;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .mobile-nav-toggle .hamburger::before,
        .mobile-nav-toggle .hamburger::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 2px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .mobile-nav-toggle .hamburger::before {
            top: -6px;
        }
        
        .mobile-nav-toggle .hamburger::after {
            bottom: -6px;
        }
        
        .mobile-nav-toggle.active .hamburger {
            background: transparent;
        }
        
        .mobile-nav-toggle.active .hamburger::before {
            transform: rotate(45deg);
            top: 0;
        }
        
        .mobile-nav-toggle.active .hamburger::after {
            transform: rotate(-45deg);
            bottom: 0;
        }
    </style>
</head>
<body>
    <button class="mobile-nav-toggle" id="mobileNavToggle">
        <div class="hamburger"></div>
    </button>
    
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h3>Learning</h3>
            <ul class="nav__items">
                {% for item in site.data.navigation.main %}
                <li class="nav__item">
                    <a href="{{ item.url }}" {% if page.url == item.url %}class="active"{% endif %}>
                        {{ item.title }}
                    </a>
                    {% if item.children %}
                    <ul class="nav__sub-items">
                        {% for child in item.children %}
                        <li class="nav__sub-item">
                            <a href="{{ child.url }}" {% if page.url == child.url %}class="active"{% endif %}>
                                {{ child.title }}
                            </a>
                            {% if child.children %}
                            <ul class="nav__sub-sub-items">
                                {% for grandchild in child.children %}
                                <li class="nav__sub-sub-item">
                                    <a href="{{ grandchild.url }}" {% if page.url == grandchild.url %}class="active"{% endif %}>
                                        {{ grandchild.title }}
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </nav>
        
        <main class="main-content">
            <div class="content">
                {{ content }}
            </div>
        </main>
    </div>
    
    <script>
        // Toggle navigation expansion
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const mobileNavToggle = document.getElementById('mobileNavToggle');
            
            // Mobile navigation toggle
            if (mobileNavToggle) {
                mobileNavToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('mobile-open');
                    mobileNavToggle.classList.toggle('active');
                });
                
                // Close mobile nav when clicking outside
                document.addEventListener('click', function(e) {
                    if (!sidebar.contains(e.target) && !mobileNavToggle.contains(e.target)) {
                        sidebar.classList.remove('mobile-open');
                        mobileNavToggle.classList.remove('active');
                    }
                });
                
                // Close mobile nav when clicking on a link
                sidebar.addEventListener('click', function(e) {
                    if (e.target.tagName === 'A' && !e.target.closest('.nav__item > a, .nav__sub-item > a')) {
                        setTimeout(() => {
                            sidebar.classList.remove('mobile-open');
                            mobileNavToggle.classList.remove('active');
                        }, 300);
                    }
                });
            }
            
            // Handle main navigation items (categories)
            const navItems = document.querySelectorAll('.nav__item > a');
            
            navItems.forEach(item => {
                const subItems = item.nextElementSibling;
                if (subItems && subItems.classList.contains('nav__sub-items')) {
                    item.addEventListener('click', function(e) {
                        e.preventDefault();
                        subItems.classList.toggle('expanded');
                    });
                }
            });
            
            // Handle sub-navigation items (subcategories)
            const navSubItems = document.querySelectorAll('.nav__sub-item > a');
            
            navSubItems.forEach(item => {
                const subSubItems = item.nextElementSibling;
                if (subSubItems && subSubItems.classList.contains('nav__sub-sub-items')) {
                    item.addEventListener('click', function(e) {
                        e.preventDefault();
                        subSubItems.classList.toggle('expanded');
                    });
                }
            });
            
            // Auto-expand only the current page's parent navigation
            const currentPage = window.location.pathname;
            let activeLink = null;

            // First, remove all server-side active classes
            const allLinks = document.querySelectorAll('.nav__item a, .nav__sub-item a, .nav__sub-sub-item a');
            allLinks.forEach(link => link.classList.remove('active'));

            // Find all matching links and pick the deepest one (most specific)
            const matchingLinks = [];

            allLinks.forEach(link => {
                const href = link.getAttribute('href');
                // Normalize URLs for comparison (handle trailing slashes and encoding)
                const normalizedHref = decodeURIComponent(href).replace(/\/$/, '');
                const normalizedPage = decodeURIComponent(currentPage).replace(/\/$/, '');

                if (normalizedHref === normalizedPage) {
                    // Determine depth: nav__sub-sub-item > nav__sub-item > nav__item
                    let depth = 0;
                    if (link.closest('.nav__sub-sub-item')) depth = 2;
                    else if (link.closest('.nav__sub-item')) depth = 1;
                    matchingLinks.push({ link, depth });
                }
            });

            // Sort by depth descending and pick the deepest match
            if (matchingLinks.length > 0) {
                matchingLinks.sort((a, b) => b.depth - a.depth);
                activeLink = matchingLinks[0].link;
                activeLink.classList.add('active');
            }

            // Expand only the parent sections of the active link
            if (activeLink) {
                let parent = activeLink.parentElement;
                while (parent) {
                    if (parent.classList.contains('nav__sub-items') || parent.classList.contains('nav__sub-sub-items')) {
                        parent.classList.add('expanded');
                    }
                    parent = parent.parentElement;
                }
            }
            
            // Handle window resize
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    sidebar.classList.remove('mobile-open');
                    mobileNavToggle.classList.remove('active');
                }
            });
            
            // Touch gestures for mobile
            let touchStartY = 0;
            let touchEndY = 0;
            
            sidebar.addEventListener('touchstart', function(e) {
                touchStartY = e.changedTouches[0].screenY;
            });
            
            sidebar.addEventListener('touchend', function(e) {
                touchEndY = e.changedTouches[0].screenY;
                handleSwipe();
            });
            
            function handleSwipe() {
                const swipeThreshold = 50;
                const swipeDistance = touchEndY - touchStartY;
                
                if (swipeDistance > swipeThreshold && sidebar.classList.contains('mobile-open')) {
                    // Swipe down - close navigation
                    sidebar.classList.remove('mobile-open');
                    mobileNavToggle.classList.remove('active');
                }
            }
            
            // Simple code formatting (no syntax highlighting)
            // Code blocks will display as plain text with good formatting
        });
    </script>
</body>
</html> 